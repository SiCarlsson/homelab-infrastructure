---
- name: Install Homepage
  hosts: local_docker_hosts
  become: yes
  gather_facts: yes

  roles:
    - role: ../roles/homepage

  post_tasks:
    - name: Check Homepage web interface connectivity
      uri:
        url: "https://homepage.{{ homepage_domain }}"
        method: GET
        timeout: 10
      register: homepage_web_check
      failed_when: false
      changed_when: false

    - name: Display setup completion
      debug:
        msg:
          - "ğŸ‰ Homepage setup completed successfully!"
          - "ğŸ  Dashboard: https://homepage.{{ homepage_domain }} {% if homepage_web_check.status == 200 %}âœ… (accessible){% else %}âŒ (check connection){% endif %}"