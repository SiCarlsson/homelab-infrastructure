global:
  checkNewVersion: false
  sendAnonymousUsage: false

# API and dashboard configuration
api:
  dashboard: {{ traefik_dashboard_enabled | lower }}
  insecure: {{ traefik_dashboard_insecure | lower }}

# Entry points
entryPoints:
  web:
    address: ":80"
{% if traefik_https_enabled %}
  websecure:
    address: ":443"
{% endif %}

# Providers
providers:
  docker:
    endpoint: "unix:///var/run/docker.sock"
    exposedByDefault: false
    network: {{ traefik_network_name }}
  file:
    directory: /etc/traefik/dynamic
    watch: true

# Logging
log:
  level: {{ traefik_log_level | upper }}
  filePath: /var/log/traefik/traefik.log

accessLog:
  filePath: /var/log/traefik/access.log

{% if traefik_https_enabled and traefik_acme_enabled %}
# ACME (Let's Encrypt) configuration
certificatesResolvers:
  letsencrypt:
    acme:
      email: {{ traefik_acme_email }}
      storage: /ssl/acme.json
      httpChallenge:
        entryPoint: web
{% endif %}

# Metrics (optional)
{% if traefik_metrics_enabled %}
metrics:
  prometheus:
    addEntryPointsLabels: true
    addServicesLabels: true
{% endif %}
